<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>个人 SQL 优化技巧 | VitePress</title>
    <meta name="description" content="A VitePress site">
    <meta name="generator" content="VitePress v1.3.0">
    <link rel="preload stylesheet" href="/assets/style.DITSXHFX.css" as="style">
    
    <script type="module" src="/assets/app.B68AjYIg.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.C6Z_8Ss2.js">
    <link rel="modulepreload" href="/assets/chunks/theme.BvP7ew8j.js">
    <link rel="modulepreload" href="/assets/docs_categories_fragments_2019_12_28_个人SQL优化技巧.md.DVBpmbb2.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5e30dff9><!--[--><!--]--><!--[--><span tabindex="-1" data-v-6bfdf4b6></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-6bfdf4b6> Skip to content </a><!--]--><!----><header class="VPNav" data-v-5e30dff9 data-v-68ae0898><div class="VPNavBar top" data-v-68ae0898 data-v-c9ebdb81><div class="wrapper" data-v-c9ebdb81><div class="container" data-v-c9ebdb81><div class="title" data-v-c9ebdb81><div class="VPNavBarTitle" data-v-c9ebdb81 data-v-443a3ac7><a class="title" href="/" data-v-443a3ac7><!--[--><!--]--><!----><span data-v-443a3ac7>VitePress</span><!--[--><!--]--></a></div></div><div class="content" data-v-c9ebdb81><div class="content-body" data-v-c9ebdb81><!--[--><!--]--><div class="VPNavBarSearch search" data-v-c9ebdb81><!----></div><!----><!----><div class="VPNavBarAppearance appearance" data-v-c9ebdb81 data-v-d0c28d1e><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-d0c28d1e data-v-96c4dac0 data-v-3044f2f4><span class="check" data-v-3044f2f4><span class="icon" data-v-3044f2f4><!--[--><span class="vpi-sun sun" data-v-96c4dac0></span><span class="vpi-moon moon" data-v-96c4dac0></span><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-c9ebdb81 data-v-24ed138b data-v-e295d10a><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-e295d10a><span class="vpi-more-horizontal icon" data-v-e295d10a></span></button><div class="menu" data-v-e295d10a><div class="VPMenu" data-v-e295d10a data-v-7495d441><!----><!--[--><!--[--><!----><div class="group" data-v-24ed138b><div class="item appearance" data-v-24ed138b><p class="label" data-v-24ed138b>Appearance</p><div class="appearance-action" data-v-24ed138b><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-24ed138b data-v-96c4dac0 data-v-3044f2f4><span class="check" data-v-3044f2f4><span class="icon" data-v-3044f2f4><!--[--><span class="vpi-sun sun" data-v-96c4dac0></span><span class="vpi-moon moon" data-v-96c4dac0></span><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-c9ebdb81 data-v-3662cadd><span class="container" data-v-3662cadd><span class="top" data-v-3662cadd></span><span class="middle" data-v-3662cadd></span><span class="bottom" data-v-3662cadd></span></span></button></div></div></div></div><div class="divider" data-v-c9ebdb81><div class="divider-line" data-v-c9ebdb81></div></div></div><!----></header><div class="VPLocalNav empty fixed" data-v-5e30dff9 data-v-9e1776ee><div class="container" data-v-9e1776ee><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-9e1776ee data-v-7c484985><button data-v-7c484985>Return to top</button><!----></div></div></div><!----><div class="VPContent" id="VPContent" data-v-5e30dff9 data-v-dc83bd05><div class="VPDoc has-aside" data-v-dc83bd05 data-v-dda96184><!--[--><!--]--><div class="container" data-v-dda96184><div class="aside" data-v-dda96184><div class="aside-curtain" data-v-dda96184></div><div class="aside-container" data-v-dda96184><div class="aside-content" data-v-dda96184><div class="VPDocAside" data-v-dda96184 data-v-e0f8840a><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-e0f8840a data-v-41febee9><div class="content" data-v-41febee9><div class="outline-marker" data-v-41febee9></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-41febee9>On this page</div><ul class="VPDocOutlineItem root" data-v-41febee9 data-v-65ef80ca><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-e0f8840a></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-dda96184><div class="content-container" data-v-dda96184><!--[--><!--]--><main class="main" data-v-dda96184><div style="position:relative;" class="vp-doc _docs_categories_fragments_2019_12_28_%E4%B8%AA%E4%BA%BASQL%E4%BC%98%E5%8C%96%E6%8A%80%E5%B7%A7" data-v-dda96184><div><h1 id="个人-sql-优化技巧" tabindex="-1">个人 SQL 优化技巧 <span class="VPBadge warning"><!--[-->持续更新<!--]--></span> <a class="header-anchor" href="#个人-sql-优化技巧" aria-label="Permalink to &quot;个人 SQL 优化技巧 &lt;Badge text=&quot;持续更新&quot; type=&quot;warning&quot; /&gt;&quot;">​</a></h1><h2 id="查询优化" tabindex="-1">查询优化 <a class="header-anchor" href="#查询优化" aria-label="Permalink to &quot;查询优化&quot;">​</a></h2><h3 id="如果确定结果只有一条-使用-limit-1" tabindex="-1">如果确定结果只有一条，使用 LIMIT 1 <span class="VPBadge tip"><!--[-->建议<!--]--></span> <a class="header-anchor" href="#如果确定结果只有一条-使用-limit-1" aria-label="Permalink to &quot;如果确定结果只有一条，使用 LIMIT 1 &lt;Badge text=&quot;建议&quot; /&gt;&quot;">​</a></h3><p>我们在根据一个或多个条件查询数据时，如果确定查询结果只有一条，可以在结尾处添加 LIMIT 1 进行限制。</p><p>这样既可以让 EXPLAIN 中的 type 达到 const 类型，又可以免去担忧在程序中出现接收是单个对象却返回了一个集合对象的异常问题。</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-TvE04" id="tab-dpyJpIs" checked><label for="tab-dpyJpIs">正例</label><input type="radio" name="group-TvE04" id="tab-Adxeb31"><label for="tab-Adxeb31">反例</label></div><div class="blocks"><div class="language-sql vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># email 不是主键，也没有设置唯一约束，根据熵增定律，查询结果是有可能会出现多条的</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `sys_user`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> WHERE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `email`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;charles7c@126.com&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> LIMIT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># user_id 是主键，主键是非空唯一的，那么不需要添加 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">LIMIT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 进行限制</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `sys_user`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> WHERE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `user_id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div></div></div><h3 id="避免隐式类型转换" tabindex="-1">避免隐式类型转换 <span class="VPBadge danger"><!--[-->强制<!--]--></span> <a class="header-anchor" href="#避免隐式类型转换" aria-label="Permalink to &quot;避免隐式类型转换 &lt;Badge text=&quot;强制&quot; type=&quot;danger&quot; /&gt;&quot;">​</a></h3><p>我们在使用 MySQL 时，或多或少都感受过 MySQL 的隐式类型转换。例如：user_id 是整数类型，但是依然可以使用字符串类型数据来进行判断。MySQL 帮你做完这种隐式类型转换是有代价的，什么代价呢？ <strong>索引不再生效了而已</strong> 。</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-1I76z" id="tab-xXoCTX0" checked><label for="tab-xXoCTX0">正例</label><input type="radio" name="group-1I76z" id="tab-Yc4ESWW"><label for="tab-Yc4ESWW">反例</label></div><div class="blocks"><div class="language-sql vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `sys_user`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> WHERE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `user_id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `sys_user`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> WHERE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `user_id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;10&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div></div></div><h2 id="数据库表设计" tabindex="-1">数据库表设计 <a class="header-anchor" href="#数据库表设计" aria-label="Permalink to &quot;数据库表设计&quot;">​</a></h2><h3 id="列名带上前缀" tabindex="-1">列名带上前缀 <span class="VPBadge tip"><!--[-->建议<!--]--></span> <a class="header-anchor" href="#列名带上前缀" aria-label="Permalink to &quot;列名带上前缀 &lt;Badge text=&quot;建议&quot; /&gt;&quot;">​</a></h3><p>部分列名带上前缀或缩写，可以有效减少在连接查询、ORM 映射等场景下刻意起别名或思考区分不同的问题。</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-F5E-0" id="tab-n5S8IoK" checked><label for="tab-n5S8IoK">正例</label></div><div class="blocks"><div class="language-sql vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> `</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sys_customer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">` (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `customer_id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> bigint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) UNSIGNED </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AUTO_INCREMENT COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;客户ID&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `customer_name`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;客户名称&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`customer_id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">USING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BTREE,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) COMMENT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;客户表&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> `</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sys_contact_user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">` (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `contact_user_id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> bigint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) UNSIGNED </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AUTO_INCREMENT COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;联系人ID&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `contact_user_name`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;联系人名称&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `customer_id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> bigint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) UNSIGNED </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;客户ID&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`contact_user_id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">USING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BTREE,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) COMMENT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;联系人表&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># 连接查询，你完全不需要用脑去考虑到底是 c.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 还是 cu.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`customer_id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 的问题，都是 </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`customer_id`</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `sys_customer`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> c </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">LEFT JOIN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `sys_contact_user`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cu </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> c.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`customer_id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cu.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`customer_id`</span></span></code></pre></div></div></div><h3 id="非负数列添加unsigned无符号约束" tabindex="-1">非负数列添加UNSIGNED无符号约束 <span class="VPBadge tip"><!--[-->建议<!--]--></span> <a class="header-anchor" href="#非负数列添加unsigned无符号约束" aria-label="Permalink to &quot;非负数列添加UNSIGNED无符号约束 &lt;Badge text=&quot;建议&quot; /&gt;&quot;">​</a></h3><p>在大部分的数据存储场景中，我们只会使用正整数，如果能确定该列为非负数，建议添加 <code>UNSIGNED</code> 无符号约束。</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-Gfvzh" id="tab-oFLkgKp" checked><label for="tab-oFLkgKp">正例</label></div><div class="blocks"><div class="language-sql vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># 不添加 UNSIGNED 约束，取值范围</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TINYINT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">：[-128, 127]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># 添加 UNSIGNED 约束，取值范围</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TINYINT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">：[0, 255]</span></span></code></pre></div></div></div><h3 id="合理采用整数类型" tabindex="-1">合理采用整数类型 <span class="VPBadge tip"><!--[-->建议<!--]--></span> <a class="header-anchor" href="#合理采用整数类型" aria-label="Permalink to &quot;合理采用整数类型 &lt;Badge text=&quot;建议&quot; /&gt;&quot;">​</a></h3><p>例如：状态类的信息，状态再多能有多少个，采用 <code>TINYINT</code> 即可，减少存储空间占用。</p><p>下方表数据整理于：<a href="https://dev.mysql.com/doc/refman/5.7/en/integer-types.html" target="_blank" rel="noreferrer">MySQL 5.7官方文档/数据类型/数值数据类型/整数类型</a></p><table tabindex="0"><thead><tr><th style="text-align:left;">类型</th><th style="text-align:left;">存储（字节）</th><th style="text-align:left;">取值范围</th><th style="text-align:left;">取值范围（无符号）</th></tr></thead><tbody><tr><td style="text-align:left;">TINYINT</td><td style="text-align:left;">1</td><td style="text-align:left;">[-128, 127]</td><td style="text-align:left;">[0, 255]</td></tr><tr><td style="text-align:left;">SMALLINT</td><td style="text-align:left;">2</td><td style="text-align:left;">[-32768, 32767]</td><td style="text-align:left;">[0, 65535]</td></tr><tr><td style="text-align:left;">MEDIUMINT</td><td style="text-align:left;">3</td><td style="text-align:left;">[-8388608, 8388607]</td><td style="text-align:left;">[0, 16777215]</td></tr><tr><td style="text-align:left;">INT</td><td style="text-align:left;">4</td><td style="text-align:left;">[-2147483648, 2147483647]</td><td style="text-align:left;">[0, 4294967295]</td></tr><tr><td style="text-align:left;">BIGINT</td><td style="text-align:left;">8</td><td style="text-align:left;">[-2^63^, 2^63^-1]</td><td style="text-align:left;">[0, 2^64^-1]</td></tr></tbody></table><h3 id="布尔列采用bit类型" tabindex="-1">布尔列采用bit类型 <span class="VPBadge tip"><!--[-->建议<!--]--></span> <a class="header-anchor" href="#布尔列采用bit类型" aria-label="Permalink to &quot;布尔列采用bit类型 &lt;Badge text=&quot;建议&quot; /&gt;&quot;">​</a></h3><p>例如：是否删除这种只有两种状态的信息，在表设计时建议对该列设置 <code>bit</code> 类型（0表示否/假/false，1表示是/真/true），在程序语言中可以采用 boolean 类型对应。</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-v74gG" id="tab-a0lEtWq" checked><label for="tab-a0lEtWq">SQL</label><input type="radio" name="group-v74gG" id="tab-XRMjRe6"><label for="tab-XRMjRe6">Java</label></div><div class="blocks"><div class="language-sql vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`is_deleted`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> bit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;0&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;是否已删除（0否 1是）&#39;</span></span></code></pre></div><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Data</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * 是否已删除（0否 1是）</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Boolean isDeleted;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></div></div><h2 id="数据库设计" tabindex="-1">数据库设计 <a class="header-anchor" href="#数据库设计" aria-label="Permalink to &quot;数据库设计&quot;">​</a></h2><h3 id="采用utf8mb4编码" tabindex="-1">采用utf8mb4编码 <span class="VPBadge tip"><!--[-->建议<!--]--></span> <a class="header-anchor" href="#采用utf8mb4编码" aria-label="Permalink to &quot;采用utf8mb4编码 &lt;Badge text=&quot;建议&quot; /&gt;&quot;">​</a></h3><div class="tip custom-block"><p class="custom-block-title">如果要存储特殊字符（例如：emoij表情符），使用 utf8mb4 编码。</p><p>MySQL 5.5.3 后增加了一个新的编码： <code>utf8mb4</code> ，其中 mb4 是 most bytes 4 的意思，用于兼容四字节的 unicode。</p><p><code>utf8mb4</code> 是 utf8 的超集，除了将编码改为 <code>utf8mb4</code> 外不需要做其他转换。</p><p>设计数据库时如果想要允许用户使用特殊符号，最好使用 <code>utf8mb4</code> 编码来存储，使得数据库有更好的兼容性，但是这样设计会导致耗费更多的存储空间。</p></div></div></div></main><footer class="VPDocFooter" data-v-dda96184 data-v-9baabf25><!--[--><!--]--><!----><!----></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"docs_about_index.md\":\"DU6uTCKn\",\"docs_about_me.md\":\"7ckTNPc4\",\"docs_archives.md\":\"-Ddx9raY\",\"docs_categories_fragments_2019_12_28_个人sql优化技巧.md\":\"DVBpmbb2\",\"docs_categories_fragments_2019_12_29_个人常用stream使用技巧.md\":\"BoBZNg99\",\"docs_categories_fragments_2019_12_30_个人常用hutool工具类.md\":\"CCRSwn6y\",\"docs_categories_fragments_2019_12_31_个人常用linux命令.md\":\"DksU4arm\",\"docs_categories_fragments_2021_03_12_精密计算工具类-bigdecimal.md\":\"DHO5PVmz\",\"docs_categories_fragments_2021_05_29_设计模式之单例模式.md\":\"DtEj01q_\",\"docs_categories_fragments_2022_02_16_个人常用sql函数.md\":\"D5MUYTjw\",\"docs_categories_fragments_2022_03_25_合并两个git仓库的历史提交记录.md\":\"C-i7W_vX\",\"docs_categories_fragments_2022_03_26_修改git最后一次提交记录的作者和邮箱.md\":\"CIRg6Ked\",\"docs_categories_fragments_2022_03_27_修改git所有提交记录中的作者和邮箱.md\":\"Dh2bi9y4\",\"docs_categories_fragments_2022_03_28_为指定git仓库单独配置用户名和邮箱.md\":\"DKGxcVeR\",\"docs_categories_fragments_2022_08_29_内网centos服务器设置网络代理.md\":\"Dn8SFE6T\",\"docs_categories_fragments_2022_10_01_个人常用docker命令.md\":\"CbY9kqNV\",\"docs_categories_fragments_2022_10_05_个人常用git命令.md\":\"BYQAyzcR\",\"docs_categories_fragments_2022_10_06_个人常用快捷键.md\":\"D5l2NnED\",\"docs_categories_fragments_2022_10_26_docker安装openldap.md\":\"B1ZabsMg\",\"docs_categories_fragments_2022_10_27_docker安装consul.md\":\"BWs5zuMa\",\"docs_categories_fragments_2022_10_28_docker安装minio.md\":\"imeENI57\",\"docs_categories_fragments_2022_10_31_centos安装docker.md\":\"BPMU_78V\",\"docs_categories_fragments_2022_11_01_使用idea进行远程程序调试.md\":\"D0aSOKik\",\"docs_categories_fragments_2022_12_07_网站开启灰色显示.md\":\"fZcb6otU\",\"docs_categories_fragments_2023_01_06_codereview方法论与实践总结.md\":\"BIgaHjtK\",\"docs_categories_fragments_2023_12_21_一文详解限流接口实现.md\":\"BehBWCpv\",\"docs_categories_fragments_index.md\":\"JcbNkpM1\",\"docs_categories_issues_2021_12_01_f盘上的回收站已损坏。是否清空该驱动器上的回收站.md\":\"BZDlE2K0\",\"docs_categories_issues_2021_12_08_for循环中删除集合元素隐藏的陷阱.md\":\"DNz7u2tG\",\"docs_categories_issues_2021_12_10_command line is too long. shorten command line for xxx or also for spring boot default configuration.md\":\"JGNsoWYJ\",\"docs_categories_issues_2021_12_11_sql 注入攻击风险.md\":\"Cn0dd1qZ\",\"docs_categories_issues_2021_12_13_无法访问f盘。文件或目录损坏且无法读取.md\":\"kF4GfZK7\",\"docs_categories_issues_2022_01_26_javascript 无法存储 java  long 类型数据问题.md\":\"DMci3aLC\",\"docs_categories_issues_2022_03_24_创建一个自身类的静态对象变量，究竟会如何执行？.md\":\"BasFMC27\",\"docs_categories_issues_2022_08_11_执行shell脚本，报java command not found.md\":\"Biu-7NVZ\",\"docs_categories_issues_2022_08_31_springboot项目引入openfeign后无法启动.md\":\"DH1xvIZV\",\"docs_categories_issues_2022_09_05_nginx转发请求，报13：permission denied错误.md\":\"BoE3fQ47\",\"docs_categories_issues_2022_09_23_解决无法重复读取请求体和响应体的问题.md\":\"C6mBBQdG\",\"docs_categories_issues_2022_10_15_解决windows桌面部分快捷方式图标变为空白的问题.md\":\"BUBYE83m\",\"docs_categories_issues_2022_10_25_解决centos8执行yum安装报错.md\":\"Bs9ZF859\",\"docs_categories_issues_2022_10_29_docker设置网络代理.md\":\"BFmSF1yX\",\"docs_categories_issues_2022_11_04_解决docker安装prometheus启动报错的问题.md\":\"n_xbj1z4\",\"docs_categories_issues_2022_11_06_解决dotnet安装后报错的问题.md\":\"eARnaPCM\",\"docs_categories_issues_2022_11_23_解决maven传递依赖污染的问题.md\":\"BQrzr2dz\",\"docs_categories_issues_index.md\":\"CKYwI0V2\",\"docs_categories_solutions_2021_11_18_用java8获取近n天日期.md\":\"yEOfSBei\",\"docs_categories_solutions_2021_11_22_一条sql查询今年每月统计信息.md\":\"BF6MyBy1\",\"docs_categories_solutions_2022_09_07_递归查询树型结构数据的性能优化方案.md\":\"Tdcp2rmZ\",\"docs_categories_solutions_index.md\":\"CIQi7-9O\",\"docs_categories_tools_2021_01_14_初识lombok.md\":\"BO37SkDN\",\"docs_categories_tools_2021_02_22_rdm快速入门.md\":\"DCK2ride\",\"docs_categories_tools_2021_03_04_ardm快速入门.md\":\"DnZmw052\",\"docs_categories_tools_2021_03_06_postman快速入门.md\":\"BFUyXMFq\",\"docs_categories_tools_2021_03_10_quartz快速入门.md\":\"Dld8jBET\",\"docs_categories_tools_index.md\":\"CIf9zXSd\",\"docs_courses_java_01-java语法入门_01-开发环境搭建.md\":\"DW7y9W8v\",\"docs_courses_java_01-java语法入门_02-第一个java程序.md\":\"BbGSxV1h\",\"docs_courses_java_01-java语法入门_03-初识eclipse.md\":\"DQ9RlfYk\",\"docs_courses_java_01-java语法入门_04-程序和计算机的那点事儿.md\":\"2u4gsu1r\",\"docs_courses_java_01-java语法入门_05-变量和常量.md\":\"CYfIY-6F\",\"docs_courses_java_01-java语法入门_06-常用的运算符.md\":\"Ch1Kv22n\",\"docs_courses_java_01-java语法入门_07-控制语句和流程图.md\":\"DbPTWh-R\",\"docs_courses_java_01-java语法入门_08-if选择结构.md\":\"BOdP7NQm\",\"docs_courses_java_01-java语法入门_09-switch选择结构.md\":\"ChF5e_Ro\",\"docs_courses_java_01-java语法入门_10-循环结构.md\":\"BMDxOS-s\",\"docs_courses_java_01-java语法入门_11-多重循环.md\":\"vf-eBy1y\",\"docs_courses_java_01-java语法入门_12-程序调试入门.md\":\"BmFXUmPQ\",\"docs_courses_java_01-java语法入门_13-一维数组.md\":\"DlYOqFFM\",\"docs_courses_java_01-java语法入门_14-多维数组.md\":\"UeCVxExF\",\"docs_courses_java_02-java面向对象_01-类和对象.md\":\"BPs3Z3eS\",\"docs_courses_java_03-java高级特性_01-集合与泛型-1.md\":\"rXBa2onL\",\"docs_courses_java_04-附录_01-centos安装jdk.md\":\"DzPGZsj5\",\"docs_courses_java_index.md\":\"F5IiBsgJ\",\"docs_courses_mysql_01-mysql基础_01-mysql安装与配置.md\":\"Cyl04rpo\",\"docs_courses_mysql_03-附录_01-centos安装mysql.md\":\"1_wihK87\",\"docs_courses_mysql_03-附录_02-docker安装mysql.md\":\"oBCsvtA7\",\"docs_courses_mysql_index.md\":\"Bx9OC2BL\",\"docs_index.md\":\"FadxBE3I\",\"docs_tags.md\":\"DS5l0D1C\",\"readme.md\":\"D7M91aq-\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"VitePress\",\"description\":\"A VitePress site\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>